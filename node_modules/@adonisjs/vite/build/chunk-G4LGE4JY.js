// src/vite_middleware.ts
var ViteMiddleware = class {
  constructor(vite) {
    this.vite = vite;
    this.#devServer = this.vite.getDevServer();
  }
  #devServer;
  async handle({ request, response }, next) {
    if (!this.#devServer)
      return next();
    if (this.#devServer.config.server.cors === false)
      response.relayHeaders();
    await new Promise((resolve) => {
      this.#devServer.middlewares.handle(request.request, response.response, () => {
        return resolve(next());
      });
    });
  }
};

export {
  ViteMiddleware
};
//# sourceMappingURL=chunk-G4LGE4JY.js.map